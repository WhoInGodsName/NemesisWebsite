@page "/"
@using MudBlazor
@using System.IO
@using System.Net.Http;
@using HtmlAgilityPack;
@using System.Diagnostics;
@using System.Collections;
@inject IJSRuntime JS
@inject IDialogService DialogService

<MudThemeProvider Theme="CustomTheme" />

<PageTitle>Full Name: Uknown</PageTitle>




<MudCarousel Class="fullPageWidth" Style="height:400px; " ShowArrows="@arrows" ShowBullets="@bullets" EnableSwipeGesture="@enableSwipeGesture" AutoCycle="@autocycle" TData="object">
    <MudCarouselItem Transition="transition" Color="@Color.Primary">
        <div class="d-flex" style="height:100%; width:100%;">
            <MudText Typo="Typo.h3" GutterBottom="true" Class="mx-auto my-auto" Size="@Size.Large"><p>FULL NAME: UNKNOWN <br /> <MudText Typo="Typo.h4" Align="Align.Center" GutterBottom="true" Class="mx-auto my-auto" Size="@Size.Small"> Level up your game.</MudText></p></MudText>
        </div>
    </MudCarouselItem>
    <MudCarouselItem Transition="transition" Color="@Color.Primary">
        <div class="d-flex" style="height:100%; width:100%;">
            <MudText Typo="Typo.h3" GutterBottom="true"  Class="mx-auto my-auto" Size="@Size.Large">LEVEL UP YOUR GAME.</MudText>
        </div>
    </MudCarouselItem>

    <MudCarouselItem Transition="transition" Color="@Color.Primary">
        <div class="d-flex" style="height:100%; width:100%;">
            <MudText Typo="Typo.h4" GutterBottom="true" Class="mx-auto my-auto" Size="@Size.Large">Mods that have your back when you need that extra edge!</MudText>
        </div>
    </MudCarouselItem>

    <MudCarouselItem Transition="transition" Color="@Color.Primary">
        <div class="d-flex" style="height:100%; width:100%;">
            <MudText Typo="Typo.h3" GutterBottom="true" Class="mx-auto my-auto" Size="@Size.Large">DOWNLOAD NEMESIS V1.4.2!</MudText>
        </div>
    </MudCarouselItem>
</MudCarousel>


<MudPaper Class="fullPageWidth" Style="position:relative; top:270px;" Elevation="0">
    <br/>
    <MudButton Variant="Variant.Outlined" Color="Color.Error" OnClick="@DownloadFileFromStream" Style="position:relative; left:41%;"> DOWNLOAD NEMESIS 1.4.2 </MudButton>
    <MudDivider DividerType="DividerType.Middle" Class="my-6" />
    <MudText Typo="Typo.h4"> Who are we?</MudText>
    <MudText>
        We are Full Name: Unknown, a few computer science students passionate about reversing games and proving a better experience for gamers 
        whether it be giving you that extra edge to win, allowing you to explore unknown regions of maps, or just doing a lil’ trolling.
    </MudText>
    <br/>
    <MudText Typo="Typo.h4"> What do we provide?</MudText>
    <MudText>
        We strive to provide quality mods to all our members, feel free to download free versions or support us by purchasing our reasonably priced premium packages which gives you license keys to access all of our most entertaining features!
    </MudText>
    <br/>
    <MudText Typo="Typo.h4"> What does the future hold? </MudText>
    <MudText>
        We have just released our first mod; NEMESIS, for the game Deep Rock Galactic which provides over 25 features all packaged in a clean and easy to navigate GUI!  We are not stopping there, and are already working on two more mods for the games For Honor and Dead by Daylight.
        Once the ball is rolling we are planning to expand our team and even open the site up for up and coming developers to release their own mods if they have been verified as safe by our team, be on the lookout!

    </MudText><br />
    <MudText Typo="Typo.h4"> NEMESIS V1.4.2 </MudText>
    <MudDivider DividerType="DividerType.Middle" Class="my-6" />
    <MudText Typo="Typo.h4">Features</MudText>
    <MudChip Color="Color.Success">Infinite ammunition</MudChip>
    <MudChip Color="Color.Success">Full auto for all guns</MudChip>
    <MudChip Color="Color.Success">FOV changer</MudChip>
    <MudChip Color="Color.Success">Custom firerate</MudChip><br />
    <MudChip Color="Color.Success">Infinite jump</MudChip>
    <MudChip Color="Color.Success">Downed movement</MudChip>
    <MudChip Color="Color.Success">infinite flares</MudChip>
    <MudChip Color="Color.Success">No flare cooldown</MudChip><br />
    <MudChip Color="Color.Success">infinite grenades</MudChip>
    <MudChip Color="Color.Success">Teleport</MudChip>
    <MudChip Color="Color.Success">Throw strength changer</MudChip>
    <MudChip Color="Color.Success">Third person mode</MudChip><br />
    <MudChip Color="Color.Success">Speed</MudChip>
    <MudChip Color="Color.Success">Fly</MudChip>
    <MudChip Color="Color.Success">infinite deposit mode</MudChip><br />

    <MudChip Color="Color.Success">Character model size changer</MudChip>
    <MudChip Color="Color.Success">Unlimited perk points</MudChip>
    <MudChip Color="Color.Success">12 different in-game emotes</MudChip>
    <MudChip Color="Color.Success">Edit deposited resource amount</MudChip><br />
    <MudChip Color="Color.Success">+5 scrip</MudChip>
    <MudChip Color="Color.Success">No cash shopping</MudChip>
    <MudChip Color="Color.Success">God mode</MudChip>
    <MudChip Color="Color.Success">No Clip</MudChip><br />
    <MudChip Color="Color.Success">Class specific cheats</MudChip>
    <MudChip Color="Color.Success">+  Lifetime access to all future updates and features!</MudChip>
    <MudDivider DividerType="DividerType.Middle" Class="my-6" />
    <MudText Typo="Typo.h4">Showcase</MudText>
    <MudImage Src="Images/page_1.PNG" Width="600" Height="350" Alt="Mony the dog" Elevation="25" Class="rounded-lg" />
    <MudImage Src="Images/page_2.PNG" Width="600" Height="350" Alt="Mony the dog" Elevation="25" Class="rounded-lg" /><br />
    <video controls="controls" width="600" height="400" style="position:absolute;">
        <source src="/showcase1.mp4" />
    </video>
    <video controls="controls" width="600" height="400" style="position:absolute; left: 50%;">
        <source src="/showcase2.mp4" />
    </video>
    
</MudPaper>




<style>
    .fullPageWidth {
        background: white;
        position: absolute;
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;
    }   
    .centreText{
        position:absolute;
        right:50%;
    }
</style>
@code{

    [Inject]
    HttpClient Client { get; set; }
    byte[] file;

    private bool arrows = true;
    private bool bullets = true;
    private bool enableSwipeGesture = true;
    private bool autocycle = true;
    private Transition transition = Transition.Slide;

    MudTheme CustomTheme = new MudTheme()
    {
        Palette = new Palette()
        {
            Primary = Colors.DeepOrange.Default,
            Secondary = Colors.DeepOrange.Default,
            AppbarBackground = Colors.DeepOrange.Default,

        },
        LayoutProperties = new LayoutProperties()
        {
            AppbarHeight = "35px",
        },
        Typography = new Typography()
        {
            Default = new Default()
            {
                FontFamily = new[] { "Poppins", "Helvetica", "Arial", "sans-serif", "Impact" }
            }
        }
    };
    private void OpenDialog()
    {
        var options = new DialogOptions { CloseOnEscapeKey = true };
        DialogService.Show<Register>("Register", options);
    }

    async Task GetFile()
    {
        file = await Client.GetByteArrayAsync("/Nemesis1.3.2.zip");
    }

    private async Task DownloadFileFromStream()
    {
        await GetFile();
        var fileStream = new MemoryStream(file);

        var fileName = "Nemesis1.3.2.zip";

        using var streamRef = new DotNetStreamReference(stream: fileStream);

        await JS.InvokeVoidAsync("downloadFileFromStream", fileName, streamRef);
    }



    private void GetDownloads()
    {
        string url = "https://www.unknowncheats.me/forum/downloads.php?do=file&id=42859";
        HttpClient httpClient = new HttpClient();
        var html = httpClient.GetStringAsync(url).Result;
        var htmlDocument = new HtmlDocument();
        htmlDocument.LoadHtml(html);

        var downloadElement = htmlDocument.DocumentNode.SelectSingleNode("//td[@class='alt2']");
        var downloads = downloadElement.InnerText.Trim();
        Debug.WriteLine(downloads);
        
    }
}

